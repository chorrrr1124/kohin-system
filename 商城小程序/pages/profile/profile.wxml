<!--pages/profile/profile.wxml-->
<view class="profile-container">
  <!-- ä¼šå‘˜ä¿¡æ¯åŒºåŸŸ -->
  <view class="member-section">
    <view class="member-header">
      <view class="member-info-row">
        <view class="member-code">
          <text class="code-text">ä¼šå‘˜ç </text>
          <text class="level-text">LV 2</text>
        </view>
        <view class="user-greeting" bindtap="onUserGreetingTap">
          <text class="greeting-text">hiï¼Œ{{userDisplayName}}</text>
        </view>
      </view>
      <view class="member-title">
        <text class="title-text">èµ„æ·±å…»é¸­äºº</text>
      </view>
      <view class="progress-section">
        <view class="progress-bar">
          <view class="progress-fill" style="width: {{progressPercent}}%"></view>
        </view>
        <text class="progress-text">{{progressText}}</text>
      </view>
    </view>
    <view class="member-avatar">
      <image-placeholder type="avatar" custom-class="duck-image" src="{{duckImage}}" mode="aspectFit"></image-placeholder>
      <view class="expert-badge">
        <text class="badge-text">EXPERT</text>
      </view>
    </view>
  </view>

  <!-- æƒç›Šå¡ç‰‡ -->
  <benefit-card 
    member-level="{{memberInfo.level}}"
    member-level-name="{{memberInfo.levelName}}"
    benefits-count="{{benefitsInfo.count}}"
    benefits-list="{{benefitsInfo.items}}"
    bind:benefittap="onBenefitTap"
    bind:viewall="onViewAllBenefits">
  </benefit-card>

  <!-- æˆ‘çš„èµ„äº§ -->
  <view class="assets-section">
    <text class="section-title">æˆ‘çš„èµ„äº§</text>
    <view class="assets-grid">
      <view class="asset-item" bindtap="onCouponTap">
        <text class="asset-value">{{userInfo.coupons || 0}}</text>
        <text class="asset-label">ä¼˜æƒ åˆ¸</text>
        <view class="asset-icon">ğŸ«</view>
      </view>
      <view class="asset-item">
        <text class="asset-value">{{userInfo.balance || 0}}</text>
        <text class="asset-label">ä½™é¢</text>
        <view class="asset-icon">ğŸ’´</view>
      </view>
      <view class="asset-item">
        <text class="asset-value">{{userInfo.points || 59.9}}</text>
        <text class="asset-label">ç§¯åˆ†</text>
        <view class="asset-icon">ğŸª™</view>
    </view>
    </view>
  </view>

  <!-- æˆ‘çš„åŠŸèƒ½ -->
  <view class="function-section">
    <text class="section-title">æˆ‘çš„åŠŸèƒ½</text>
    
    <view class="function-grid">
      <block wx:for="{{functionMenus}}" wx:key="index" wx:for-index="rowIndex">
        <view class="function-row">
          <block wx:for="{{item}}" wx:key="path" wx:for-item="menu">
            <view class="function-item" bindtap="onMenuTap" data-path="{{menu.path}}">
              <image-placeholder type="default" custom-class="function-icon" src="{{menu.icon}}" mode="aspectFit"></image-placeholder>
              <text class="function-name">{{menu.name}}</text>
            </view>
          </block>
        </view>
      </block>
    </view>
    
    <!-- è°ƒè¯•åŠŸèƒ½æŒ‰é’® -->
    <view class="debug-section">
      <button class="debug-btn" bindtap="goToDebug">
        ğŸ› è°ƒè¯•å·¥å…·
      </button>
    </view>
  </view>

  <!-- å¿ƒæ„ç¤¼å¡ -->
  <view class="gift-section">
    <view class="gift-header">
      <text class="section-title">å¿ƒæ„ç¤¼å¡</text>
      <view class="view-all" bindtap="onViewAllGifts">
        <text class="view-all-text">æŸ¥çœ‹ å…¨éƒ¨</text>
        <text class="arrow">Â»</text>
      </view>
    </view>
    
    <view class="gift-cards">
      <block wx:for="{{giftCards}}" wx:key="id">
        <view class="gift-card" bindtap="onGiftCardTap" data-id="{{item.id}}">
          <image-placeholder type="product" custom-class="gift-image" src="{{item.image}}" mode="aspectFill"></image-placeholder>
          <view class="gift-overlay">
            <view class="gift-price">
              <text class="price-symbol">ï¿¥</text>
              <text class="price-value">{{item.price}}</text>
            </view>
            <text class="gift-title">{{item.title}}</text>
            <text class="gift-brand">{{item.brand}}</text>
          </view>
        </view>
      </block>
    </view>
  </view>
</view>