<!--pages/profile/profile.wxml-->
<view class="profile-container">


  <!-- 会员卡 -->
  <view class="member-card">
    <!-- 会员码按钮 -->
    <view class="member-code-btn">
      <text class="member-code-text">会员码</text>
    </view>
    
    <!-- 用户身份和等级 -->
    <view class="user-identity">
      <view class="identity-left">
        <view class="level-badge">
          <text class="level-text">LV {{userInfo.vipLevel || 2}}</text>
        </view>
        <text class="user-title">资深养鸭人</text>
        <view class="progress-section">
          <view class="progress-bar">
            <view class="progress-fill" style="width: {{(growthInfo.current / growthInfo.total) * 100}}%"></view>
          </view>
          <text class="progress-text">{{growthInfo.current || 170.9}}/{{growthInfo.total || 480}}</text>
        </view>
        <text class="upgrade-text">再获得{{(growthInfo.total || 480) - (growthInfo.current || 170.9)}}鸭力值可升级为鸭厂小财主</text>
      </view>
      
      <!-- 吉祥物鸭子 -->
      <view class="mascot-duck">
        <text class="duck-emoji">🦆</text>
        <text class="duck-label">EXPERT</text>
      </view>
    </view>
  </view>

  <!-- 已解锁权益 -->
  <view class="benefits-section">
    <view class="benefits-header">
      <text class="benefits-title">已解锁{{benefitsInfo.count || 5}}项权益</text>
      <view class="view-all-benefits">
        <text class="view-all-text">全部权益 ></text>
      </view>
    </view>
    
    <view class="benefits-grid">
      <view class="benefit-item">
        <view class="benefit-icon">💰</view>
        <text class="benefit-count">x1</text>
        <text class="benefit-name">满30-5元券</text>
      </view>
      <view class="benefit-item">
        <view class="benefit-icon">🥤</view>
        <text class="benefit-count">x1</text>
        <text class="benefit-name">招牌饮品8...</text>
      </view>
      <view class="benefit-item">
        <view class="benefit-icon">🪙</view>
        <text class="benefit-count">x2</text>
        <text class="benefit-name">鸭币翻倍</text>
      </view>
      <view class="benefit-item">
        <view class="benefit-icon">🎂</view>
        <text class="benefit-count">x1</text>
        <text class="benefit-name">生日单品8...</text>
      </view>
    </view>
  </view>

  <!-- 我的资产 -->
  <view class="assets-section">
    <text class="section-title">我的资产</text>
    <view class="assets-grid">
      <view class="asset-item">
        <text class="asset-value">{{userInfo.coupons || 5}}</text>
        <text class="asset-label">优惠券</text>
        <view class="asset-icon">🎫</view>
      </view>
      <view class="asset-item">
        <text class="asset-value">{{userInfo.balance || 0}}</text>
        <text class="asset-label">余额</text>
        <view class="asset-icon">💴</view>
      </view>
      <view class="asset-item">
        <text class="asset-value">{{userInfo.points || 59.9}}</text>
        <text class="asset-label">积分</text>
        <view class="asset-icon">🪙</view>
      </view>
    </view>
  </view>

  <!-- 我的功能 -->
  <view class="function-section">
    <text class="section-title">我的功能</text>
    
    <view class="function-grid">
      <block wx:for="{{functionMenus}}" wx:key="index" wx:for-index="rowIndex">
        <view class="function-row">
          <block wx:for="{{item}}" wx:key="path" wx:for-item="menu">
            <view class="function-item" bindtap="onMenuTap" data-path="{{menu.path}}">
              <image class="function-icon" src="{{menu.icon}}" mode="aspectFit"></image>
              <text class="function-name">{{menu.name}}</text>
            </view>
          </block>
        </view>
      </block>
    </view>
  </view>

  <!-- 心意礼卡 -->
  <view class="gift-section">
    <view class="gift-header">
      <text class="section-title">心意礼卡</text>
      <view class="view-all" bindtap="onViewAllGifts">
        <text class="view-all-text">查看 全部</text>
        <text class="arrow">»</text>
      </view>
    </view>
    
    <view class="gift-cards">
      <block wx:for="{{giftCards}}" wx:key="id">
        <view class="gift-card" bindtap="onGiftCardTap" data-id="{{item.id}}">
          <image class="gift-image" src="{{item.image}}" mode="aspectFill"></image>
          <view class="gift-overlay">
            <view class="gift-price">
              <text class="price-symbol">￥</text>
              <text class="price-value">{{item.price}}</text>
            </view>
            <text class="gift-title">{{item.title}}</text>
            <text class="gift-brand">{{item.brand}}</text>
          </view>
        </view>
      </block>
    </view>
  </view>
</view>