<!--pages/coupon-center/coupon-center.wxml-->
<view class="container">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <view class="header-title">ä¼˜æƒ åˆ¸ä¸­å¿ƒ</view>
    <view class="header-subtitle">ç²¾é€‰ä¼˜æƒ åˆ¸ï¼Œç­‰ä½ æ¥é¢†</view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view wx:if="{{loading}}" class="loading-container">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- ä¼˜æƒ åˆ¸åˆ—è¡¨ -->
  <view wx:elif="{{coupons.length > 0}}" class="coupon-list">
    <view 
      wx:for="{{coupons}}" 
      wx:key="_id" 
      class="coupon-item"
      data-id="{{item._id}}"
      data-name="{{item.name}}"
      bindtap="viewCouponDetail"
    >
      <!-- ä¼˜æƒ åˆ¸å·¦ä¾§ä¿¡æ¯ -->
      <view class="coupon-left">
        <view class="coupon-value">
          <text wx:if="{{item.type === 'fixed'}}" class="value-symbol">Â¥</text>
          <text class="value-number">{{item.value}}</text>
          <text wx:if="{{item.type === 'percentage'}}" class="value-unit">%</text>
        </view>
        <view class="coupon-condition">
          {{item.minAmount > 0 ? 'æ»¡' + item.minAmount + 'å…ƒå¯ç”¨' : 'æ— é—¨æ§›'}}
        </view>
      </view>

      <!-- ä¼˜æƒ åˆ¸å³ä¾§ä¿¡æ¯ -->
      <view class="coupon-right">
        <view class="coupon-name">{{item.name}}</view>
        <view class="coupon-desc">{{item.description || 'æœ¬åˆ¸ä¸å¯ä¸å…¶ä»–ä¼˜æƒ åŒäº«'}}</view>
        <view class="coupon-validity">
          {{item.startTime ? formatDate(item.startTime) : 'ç«‹å³'}} - {{item.endTime ? formatDate(item.endTime) : 'æ°¸ä¸è¿‡æœŸ'}}
        </view>
        
        <!-- é¢†å–æŒ‰é’® -->
        <button 
          class="claim-btn"
          data-id="{{item._id}}"
          data-name="{{item.name}}"
          bindtap="claimCoupon"
          catchtap="claimCoupon"
        >
          ç«‹å³é¢†å–
        </button>
      </view>

      <!-- ä¼˜æƒ åˆ¸è£…é¥°å…ƒç´  -->
      <view class="coupon-decoration">
        <view class="decoration-circle circle-left"></view>
        <view class="decoration-circle circle-right"></view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view wx:else class="empty-state">
    <view class="empty-icon">ğŸ«</view>
    <view class="empty-text">æš‚æ— å¯ç”¨ä¼˜æƒ åˆ¸</view>
    <view class="empty-subtext">è¯·ç¨åå†æ¥çœ‹çœ‹å§</view>
  </view>

  <!-- åº•éƒ¨æç¤º -->
  <view class="bottom-tips">
    <text class="tips-text">ä¼˜æƒ åˆ¸é¢†å–åå¯åœ¨"æˆ‘çš„ä¼˜æƒ åˆ¸"ä¸­æŸ¥çœ‹</text>
  </view>
</view> 