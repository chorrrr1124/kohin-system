## ✅ 订单状态流程修改完成！

### 🔄 新的订单状态流程

#### 📊 状态定义（3种状态）
1. **pending** - 待付款
2. **pending_shipment** - 待发货  
3. **completed** - 已完成

#### 🎯 初始状态规则
- **现金支付/微信支付/预存抵扣**: pending（待付款）
- **预存扣除**: pending_shipment（待发货）

#### 🔄 状态流转
```
普通订单: pending → pending_shipment → completed
预存扣除: pending_shipment → completed
```

### 🔧 修改内容

#### 1️⃣ **状态定义修改**
- `pages/orders/orders.js`: 更新选项卡定义
- `pages/orders/orderDetail/orderDetail.js`: 更新状态文本
- `pages/orders/addOrder/addOrder.js`: 更新状态列表
- `pages/customers/customerDetail/customerDetail.js`: 更新状态文本

#### 2️⃣ **初始状态设置**
- `app.js`: 新增 `getInitialOrderStatus` 函数
- 根据 `paymentMethod` 确定初始状态

#### 3️⃣ **状态流转逻辑**
- `pages/orders/orderDetail/orderDetail.js`: 修改两处状态流转
- `pages/orders/orders.js`: 修改状态变更逻辑

#### 4️⃣ **界面文本更新**
- `pages/orders/orders.wxml`: 状态显示和按钮文本
- `pages/orders/orderDetail/orderDetail.wxml`: 按钮文本

#### 5️⃣ **预存产品扣减逻辑**
- 从 "订单创建时扣减" 改为 "状态变为已完成时扣减"
- 预存产品扣减条件: `pending_shipment → completed`

### 📱 用户体验

#### 💰 现金支付/微信支付/预存抵扣订单
1. 下单 → **待付款**
2. 确认付款 → **待发货** 
3. 确认完成 → **已完成**

#### 🎁 预存扣除订单
1. 下单 → **待发货**（直接跳过付款）
2. 确认完成 → **已完成**（此时扣减预存产品）

### 🎯 关键改进

- ✅ **简化流程**: 去掉"已发货"状态，减少操作步骤
- ✅ **智能路由**: 根据支付方式自动设置合适的初始状态
- ✅ **预存扣减**: 在订单真正完成时才扣减预存产品
- ✅ **统一体验**: 所有页面状态显示保持一致


