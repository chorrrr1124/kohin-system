# 🌐 小程序域名配置说明

## 📋 问题描述
小程序出现域名校验错误：`https://servicewechat.com 不在以下 request 合法域名列表中`

## 🔧 解决方案

### 1. 开发阶段临时解决（已完成）
已将 `project.private.config.json` 中的 `urlCheck` 设置为 `false`，关闭域名校验。

### 2. 生产发布前必须配置的域名白名单

在微信公众平台小程序管理后台配置以下域名：

#### 🔗 request 合法域名
```
https://servicewechat.com
https://636c-cloudbase-3g4w6lls8a5ce59b-1327524326.tcb.qcloud.la
https://tcb-api.tencentcloudapi.com
https://apis.map.qq.com
https://lbs.netease.im
https://wlnimsc0.netease.im
```

#### 🔗 uploadFile 合法域名
```
https://636c-cloudbase-3g4w6lls8a5ce59b-1327524326.tcb.qcloud.la
```

#### 🔗 downloadFile 合法域名
```
https://636c-cloudbase-3g4w6lls8a5ce59b-1327524326.tcb.qcloud.la
```

### 3. 配置步骤

1. **登录微信公众平台**
   - 访问：https://mp.weixin.qq.com
   - 使用小程序管理员微信扫码登录

2. **进入开发管理**
   - 左侧菜单 → 开发 → 开发管理
   - 点击 "开发设置"

3. **配置服务器域名**
   - 找到 "服务器域名" 部分
   - 点击 "修改"
   - 将上述域名分别添加到对应的域名列表中

4. **保存并生效**
   - 点击 "保存并提交"
   - 域名配置会在几分钟内生效

### 4. 验证配置

配置完成后：
1. 在微信开发者工具中
2. 将 `project.private.config.json` 中的 `urlCheck` 改回 `true`
3. 重新编译项目
4. 确认不再出现域名错误

## ⚠️ 重要提示

- **开发阶段**：可以关闭 `urlCheck` 进行调试
- **发布前**：必须配置域名白名单并开启 `urlCheck`
- **安全考虑**：只添加必要的域名，避免安全风险

## 🔍 常见问题

### Q: 为什么会出现 servicewechat.com 域名？
A: 这通常是微信小程序框架或第三方SDK自动请求的域名，用于统计或其他服务。

### Q: 可以永久关闭域名校验吗？
A: 不建议。生产环境必须开启域名校验以确保安全性。

### Q: 配置域名后多久生效？
A: 通常在5-10分钟内生效，建议配置后等待一段时间再测试。

## 📞 技术支持
如有问题，请联系技术支持或查看微信小程序官方文档。 