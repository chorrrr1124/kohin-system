# ğŸš€ Webç«¯ç®¡ç†å°ç¨‹åºå¸ƒå±€ç³»ç»Ÿ - å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸ“‹ ç›®å½•
- [åŠŸèƒ½æ¦‚è§ˆ](#åŠŸèƒ½æ¦‚è§ˆ)
- [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
- [å¿«é€Ÿéƒ¨ç½²](#å¿«é€Ÿéƒ¨ç½²)
- [åŸºç¡€é…ç½®](#åŸºç¡€é…ç½®)
- [ç¬¬ä¸€ä¸ªé¡µé¢å¸ƒå±€](#ç¬¬ä¸€ä¸ªé¡µé¢å¸ƒå±€)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## ğŸ¯ åŠŸèƒ½æ¦‚è§ˆ

è¿™å¥—ç³»ç»Ÿå¯ä»¥è®©æ‚¨é€šè¿‡ Web ç«¯åå°**æ— éœ€é‡æ–°å‘å¸ƒå°ç¨‹åº**å³å¯å®ç°ï¼š

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ¨ **å¯è§†åŒ–å¸ƒå±€ç¼–è¾‘**ï¼šæ‹–æ‹½å¼ç»„ä»¶ç¼–è¾‘å™¨
- ğŸ”„ **å®æ—¶é…ç½®æ›´æ–°**ï¼šWebSocket å®æ—¶æ¨é€é…ç½®å˜æ›´
- ğŸ­ **ä¸»é¢˜ç®¡ç†**ï¼šç»Ÿä¸€çš„é¢œè‰²ã€å­—ä½“ã€æ ·å¼ç®¡ç†
- ğŸ“± **å“åº”å¼é¢„è§ˆ**ï¼šå®æ—¶é¢„è§ˆå°ç¨‹åºæ•ˆæœ
- ğŸ“š **ç»„ä»¶åº“**ï¼šå¯æ‰©å±•çš„ç»„ä»¶åº“ç³»ç»Ÿ
- ğŸ”„ **ç‰ˆæœ¬æ§åˆ¶**ï¼šé…ç½®å†å²è®°å½•å’Œå›æ»š
- ğŸ‘¥ **æƒé™ç®¡ç†**ï¼šå¤šç”¨æˆ·è§’è‰²ç®¡ç†

### æ”¯æŒçš„ç»„ä»¶ç±»å‹
- **è½®æ’­å›¾ (Banner)**ï¼šå¤šå›¾è½®æ’­ï¼Œæ”¯æŒè‡ªåŠ¨æ’­æ”¾
- **äº§å“ç½‘æ ¼ (Product Grid)**ï¼šå•†å“å±•ç¤ºç½‘æ ¼
- **æ–‡æœ¬ç»„ä»¶ (Text)**ï¼šå¯Œæ–‡æœ¬å†…å®¹å±•ç¤º
- **å›¾ç‰‡ç»„ä»¶ (Image)**ï¼šå•å›¾å±•ç¤º
- **è‡ªå®šä¹‰ç»„ä»¶**ï¼šå¯æ‰©å±•æ›´å¤šç»„ä»¶ç±»å‹

---

## ğŸ› ï¸ ç¯å¢ƒå‡†å¤‡

### ç³»ç»Ÿè¦æ±‚
- **Node.js**: >= 16.0.0
- **npm**: >= 8.0.0
- **MongoDB**: >= 4.4
- **Redis**: >= 6.0 (å¯é€‰)

### æ¨èå¼€å‘å·¥å…·
- **å¾®ä¿¡å¼€å‘è€…å·¥å…·**: æœ€æ–°ç‰ˆ
- **VS Code**: é…åˆç›¸å…³æ’ä»¶
- **Docker**: ç”¨äºå¿«é€Ÿéƒ¨ç½²

---

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### æ–¹å¼ä¸€ï¼šDocker ä¸€é”®éƒ¨ç½² (æ¨è)

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/your-repo/miniprogram-layout-cms.git
cd miniprogram-layout-cms
```

2. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡
nano .env
```

3. **å¯åŠ¨æœåŠ¡**
```bash
# ç”Ÿäº§ç¯å¢ƒ
docker-compose up -d

# å¼€å‘ç¯å¢ƒ
docker-compose -f docker-compose.yml -f docker-compose.dev.yml up -d
```

4. **è®¿é—®ç®¡ç†ç•Œé¢**
- Webç®¡ç†ç«¯: http://localhost:8080
- APIæ–‡æ¡£: http://localhost:3000/api-docs
- æ•°æ®åº“ç®¡ç†: http://localhost:8082 (å¼€å‘ç¯å¢ƒ)

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

1. **åç«¯éƒ¨ç½²**
```bash
cd backend
npm install
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶é…ç½®æ•°æ®åº“è¿æ¥ç­‰
npm run build
npm start
```

2. **Webç®¡ç†ç«¯éƒ¨ç½²**
```bash
cd web-admin
npm install
npm run build
# éƒ¨ç½² dist ç›®å½•åˆ° Web æœåŠ¡å™¨
```

3. **å°ç¨‹åºç«¯é…ç½®**
```bash
cd miniprogram
# åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€é¡¹ç›®
# é…ç½®äº‘å¼€å‘ç¯å¢ƒ
# ä¿®æ”¹ services/configService.js ä¸­çš„ baseUrl
```

---

## âš™ï¸ åŸºç¡€é…ç½®

### 1. æ•°æ®åº“åˆå§‹åŒ–

é¦–æ¬¡éƒ¨ç½²åï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºå¿…è¦çš„æ•°æ®åº“é›†åˆå’Œåˆå§‹æ•°æ®ï¼š

```javascript
// åˆå§‹æ•°æ®åŒ…æ‹¬ï¼š
{
  // é»˜è®¤ä¸»é¢˜
  themes: [é»˜è®¤ä¸»é¢˜é…ç½®],
  
  // ç»„ä»¶åº“
  component_library: [è½®æ’­å›¾, äº§å“ç½‘æ ¼, æ–‡æœ¬, å›¾ç‰‡],
  
  // ç¤ºä¾‹é¡µé¢é…ç½®
  page_configs: [é¦–é¡µ, äº§å“é¡µç¤ºä¾‹]
}
```

### 2. å°ç¨‹åºç«¯é…ç½®

åœ¨å°ç¨‹åºçš„ `services/configService.js` ä¸­é…ç½® API åœ°å€ï¼š

```javascript
class ConfigService {
  constructor() {
    this.baseUrl = 'https://your-api-domain.com/api'; // ä¿®æ”¹ä¸ºæ‚¨çš„APIåœ°å€
  }
}
```

### 3. åŸŸåé…ç½®

åœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½®æœåŠ¡å™¨åŸŸåï¼š
- **requeståˆæ³•åŸŸå**: `https://your-api-domain.com`
- **socketåˆæ³•åŸŸå**: `wss://your-websocket-domain.com`
- **uploadFileåˆæ³•åŸŸå**: `https://your-api-domain.com`

---

## ğŸ¨ ç¬¬ä¸€ä¸ªé¡µé¢å¸ƒå±€

### æ­¥éª¤1ï¼šç™»å½•ç®¡ç†åå°

1. è®¿é—® http://localhost:8080
2. ä½¿ç”¨é»˜è®¤è´¦å·ç™»å½•ï¼š
   - ç”¨æˆ·å: `admin`
   - å¯†ç : `admin123`

### æ­¥éª¤2ï¼šåˆ›å»ºé¡µé¢

1. ç‚¹å‡» **"é¡µé¢ç®¡ç†"** èœå•
2. ç‚¹å‡» **"æ–°å»ºé¡µé¢"** æŒ‰é’®
3. å¡«å†™é¡µé¢ä¿¡æ¯ï¼š
   ```
   é¡µé¢åç§°: æˆ‘çš„é¦–é¡µ
   é¡µé¢è·¯å¾„: pages/index/index
   é€‰æ‹©ä¸»é¢˜: é»˜è®¤ä¸»é¢˜
   ```

### æ­¥éª¤3ï¼šç¼–è¾‘å¸ƒå±€

1. è¿›å…¥ **"å¸ƒå±€ç¼–è¾‘å™¨"**
2. ä»å·¦ä¾§ç»„ä»¶é¢æ¿æ‹–æ‹½ç»„ä»¶åˆ°ç”»å¸ƒ
3. é…ç½®ç»„ä»¶å±æ€§ï¼š

#### æ·»åŠ è½®æ’­å›¾
```javascript
// è½®æ’­å›¾é…ç½®ç¤ºä¾‹
{
  images: [
    "https://example.com/banner1.jpg",
    "https://example.com/banner2.jpg"
  ],
  autoplay: true,
  duration: 3000,
  indicatorDots: true
}
```

#### æ·»åŠ äº§å“ç½‘æ ¼
```javascript
// äº§å“ç½‘æ ¼é…ç½®ç¤ºä¾‹
{
  columns: 2,
  showPrice: true,
  showStock: false,
  products: [
    {
      id: "1",
      name: "çç å¥¶èŒ¶",
      price: 12.00,
      image: "https://example.com/product1.jpg"
    }
  ]
}
```

### æ­¥éª¤4ï¼šé¢„è§ˆå’Œå‘å¸ƒ

1. ç‚¹å‡» **"é¢„è§ˆ"** æŸ¥çœ‹æ•ˆæœ
2. ç¡®è®¤æ— è¯¯åç‚¹å‡» **"å‘å¸ƒ"**
3. å°ç¨‹åºç«¯å°†è‡ªåŠ¨è·å–æœ€æ–°é…ç½®

### æ­¥éª¤5ï¼šå°ç¨‹åºç«¯éªŒè¯

åœ¨å°ç¨‹åºä¸­è®¿é—®å¯¹åº”é¡µé¢ï¼ŒéªŒè¯å¸ƒå±€æ˜¯å¦æ­£ç¡®æ˜¾ç¤ºã€‚

---

## ğŸ”§ é«˜çº§é…ç½®

### è‡ªå®šä¹‰ä¸»é¢˜

1. è¿›å…¥ **"ä¸»é¢˜ç®¡ç†"**
2. åˆ›å»ºæ–°ä¸»é¢˜æˆ–ç¼–è¾‘ç°æœ‰ä¸»é¢˜
3. é…ç½®é¢œè‰²æ–¹æ¡ˆï¼š
```javascript
{
  colors: {
    primary: "#FF6B6B",      // ä¸»è‰²è°ƒ
    secondary: "#4ECDC4",    // è¾…åŠ©è‰²
    text_primary: "#2C3E50", // ä¸»æ–‡æœ¬è‰²
    background: "#FFFFFF"    // èƒŒæ™¯è‰²
  }
}
```

### æ·»åŠ è‡ªå®šä¹‰ç»„ä»¶

1. **åç«¯æ³¨å†Œç»„ä»¶**
```javascript
// models/Component.js
{
  component_type: "custom_card",
  component_name: "è‡ªå®šä¹‰å¡ç‰‡",
  default_config: {
    title: "é»˜è®¤æ ‡é¢˜",
    content: "é»˜è®¤å†…å®¹"
  }
}
```

2. **Webç«¯æ·»åŠ ç¼–è¾‘å™¨**
```vue
<!-- CustomCardEditor.vue -->
<template>
  <div>
    <el-input v-model="config.title" placeholder="å¡ç‰‡æ ‡é¢˜" />
    <el-input v-model="config.content" type="textarea" placeholder="å¡ç‰‡å†…å®¹" />
  </div>
</template>
```

3. **å°ç¨‹åºç«¯å®ç°æ¸²æŸ“**
```xml
<!-- custom-cardç»„ä»¶ -->
<view class="custom-card">
  <text class="title">{{config.title}}</text>
  <text class="content">{{config.content}}</text>
</view>
```

---

## ğŸ“Š ç›‘æ§å’Œåˆ†æ

### æŸ¥çœ‹ä½¿ç”¨ç»Ÿè®¡

```bash
# APIè°ƒç”¨ç»Ÿè®¡
curl http://localhost:3000/api/stats

# ç¼“å­˜ä½¿ç”¨æƒ…å†µ
curl http://localhost:3000/api/cache/stats

# ç³»ç»Ÿå¥åº·æ£€æŸ¥
curl http://localhost:3000/api/health
```

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹APIæœåŠ¡æ—¥å¿—
docker logs miniprogram-api

# æŸ¥çœ‹WebæœåŠ¡æ—¥å¿—
docker logs miniprogram-admin

# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
docker logs miniprogram-mongodb
```

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: å°ç¨‹åºæ— æ³•è·å–é…ç½®

**å¯èƒ½åŸå› ï¼š**
- APIåœ°å€é…ç½®é”™è¯¯
- åŸŸåæœªåœ¨å¾®ä¿¡å…¬ä¼—å¹³å°é…ç½®
- ç½‘ç»œè¿æ¥é—®é¢˜

**è§£å†³æ–¹æ³•ï¼š**
```javascript
// 1. æ£€æŸ¥configService.jsä¸­çš„baseUrlé…ç½®
this.baseUrl = 'https://your-correct-api-domain.com/api';

// 2. æ£€æŸ¥ç½‘ç»œè¯·æ±‚æ˜¯å¦æˆåŠŸ
console.log('APIè¯·æ±‚ç»“æœ:', result);

// 3. ä½¿ç”¨é»˜è®¤é…ç½®ä½œä¸ºåå¤‡
return this.getDefaultConfig(pageId);
```

### Q2: å¸ƒå±€ç¼–è¾‘å™¨æ‹–æ‹½ä¸ç”Ÿæ•ˆ

**å¯èƒ½åŸå› ï¼š**
- æµè§ˆå™¨ä¸æ”¯æŒæŸäº›API
- ç»„ä»¶åº“æœªæ­£ç¡®åŠ è½½

**è§£å†³æ–¹æ³•ï¼š**
```javascript
// æ£€æŸ¥æµè§ˆå™¨å…¼å®¹æ€§
if (!window.DragEvent) {
  console.error('æµè§ˆå™¨ä¸æ”¯æŒæ‹–æ‹½API');
}

// å¼ºåˆ¶åˆ·æ–°ç»„ä»¶åº“
this.$store.dispatch('components/fetchComponents');
```

### Q3: é…ç½®æ›´æ–°ä¸å®æ—¶

**å¯èƒ½åŸå› ï¼š**
- WebSocketè¿æ¥å¤±è´¥
- ç¼“å­˜æœªæ­£ç¡®æ¸…é™¤

**è§£å†³æ–¹æ³•ï¼š**
```javascript
// æ£€æŸ¥WebSocketè¿æ¥çŠ¶æ€
console.log('WebSocketçŠ¶æ€:', this.isSocketConnected);

// æ‰‹åŠ¨æ¸…é™¤ç¼“å­˜
configService.clearAllCache();

// å¼ºåˆ¶åˆ·æ–°é…ç½®
await this.refreshConfig({ force: true });
```

### Q4: å›¾ç‰‡ä¸Šä¼ å¤±è´¥

**å¯èƒ½åŸå› ï¼š**
- æ–‡ä»¶å¤§å°è¶…é™
- æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒ
- å­˜å‚¨ç©ºé—´ä¸è¶³

**è§£å†³æ–¹æ³•ï¼š**
```javascript
// æ£€æŸ¥æ–‡ä»¶å¤§å° (10MBé™åˆ¶)
if (file.size > 10 * 1024 * 1024) {
  console.error('æ–‡ä»¶å¤§å°è¶…è¿‡10MBé™åˆ¶');
}

// æ£€æŸ¥æ–‡ä»¶æ ¼å¼
const allowedTypes = ['image/jpeg', 'image/png', 'image/gif'];
if (!allowedTypes.includes(file.type)) {
  console.error('ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼');
}
```

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©
- ğŸ“– **è¯¦ç»†æ–‡æ¡£**: [æŸ¥çœ‹å®Œæ•´å¼€å‘æ–‡æ¡£](./Webç«¯ç®¡ç†å°ç¨‹åºå¸ƒå±€ç³»ç»Ÿå¼€å‘æ–‡æ¡£.md)
- ğŸ› **é—®é¢˜åé¦ˆ**: æäº¤ GitHub Issue
- ğŸ’¬ **æŠ€æœ¯äº¤æµ**: åŠ å…¥å¾®ä¿¡æŠ€æœ¯ç¾¤

### è”ç³»æ–¹å¼
- **é‚®ç®±**: tech-support@example.com
- **å¾®ä¿¡**: your_wechat_id
- **QQç¾¤**: 123456789

---

## ğŸ‰ å¿«é€Ÿå¼€å§‹å®Œæˆï¼

æ­å–œï¼æ‚¨å·²ç»æˆåŠŸæ­å»ºäº†Webç«¯ç®¡ç†å°ç¨‹åºå¸ƒå±€ç³»ç»Ÿã€‚ç°åœ¨æ‚¨å¯ä»¥ï¼š

1. âœ… é€šè¿‡Webåå°å¯è§†åŒ–ç¼–è¾‘å°ç¨‹åºé¡µé¢å¸ƒå±€
2. âœ… å®æ—¶é¢„è§ˆå’Œå‘å¸ƒé…ç½®å˜æ›´
3. âœ… ç®¡ç†ä¸»é¢˜å’Œç»„ä»¶åº“
4. âœ… ç›‘æ§ç³»ç»Ÿè¿è¡ŒçŠ¶æ€

ä¸‹ä¸€æ­¥å»ºè®®ï¼š
- ğŸ” æ·±å…¥äº†è§£[å®Œæ•´å¼€å‘æ–‡æ¡£](./Webç«¯ç®¡ç†å°ç¨‹åºå¸ƒå±€ç³»ç»Ÿå¼€å‘æ–‡æ¡£.md)
- ğŸ¨ è‡ªå®šä¹‰ä¸»é¢˜å’Œç»„ä»¶
- ğŸ“Š é…ç½®ç›‘æ§å’Œåˆ†æ
- ğŸš€ éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ğŸŠ 