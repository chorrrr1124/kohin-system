<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº‘å‡½æ•°æµ‹è¯•</title>
    <script src="https://imgcache.qq.com/qzone/biz/gdt/lib/js/2.0/GTM-57vd6r.js"></script>
    <script src="https://tcb-1251009918.cos.ap-guangzhou.myqcloud.com/tcb-js-sdk-v1.7.0.js"></script>
</head>
<body>
    <h1>äº‘å‡½æ•°æµ‹è¯•é¡µé¢</h1>
    <button onclick="testImageManager()">æµ‹è¯•imageManageräº‘å‡½æ•°</button>
    <button onclick="testGetImageList()">æµ‹è¯•getImageListäº‘å‡½æ•°</button>
    <div id="result"></div>

    <script>
        // åˆå§‹åŒ–CloudBase
        const app = tcb.init({
            env: 'cloudbase-3g4w6lls8a5ce59b'
        });

        // æµ‹è¯•imageManageräº‘å‡½æ•°
        async function testImageManager() {
            try {
                console.log('ğŸ” æµ‹è¯•imageManageräº‘å‡½æ•°...');
                const result = await app.callFunction({
                    name: 'imageManager',
                    data: {
                        action: 'getImageList',
                        data: {
                            category: 'banner',
                            path: 'images/banner/'
                        }
                    }
                });
                
                console.log('âœ… imageManagerè°ƒç”¨æˆåŠŸ:', result);
                document.getElementById('result').innerHTML = 
                    '<h3>imageManageræµ‹è¯•ç»“æœ:</h3><pre>' + JSON.stringify(result, null, 2) + '</pre>';
            } catch (error) {
                console.error('âŒ imageManagerè°ƒç”¨å¤±è´¥:', error);
                document.getElementById('result').innerHTML = 
                    '<h3>imageManageræµ‹è¯•å¤±è´¥:</h3><pre>' + error.message + '</pre>';
            }
        }

        // æµ‹è¯•getImageListäº‘å‡½æ•°
        async function testGetImageList() {
            try {
                console.log('ğŸ” æµ‹è¯•getImageListäº‘å‡½æ•°...');
                const result = await app.callFunction({
                    name: 'getImageList',
                    data: {
                        category: 'banner',
                        path: 'images/banner/'
                    }
                });
                
                console.log('âœ… getImageListè°ƒç”¨æˆåŠŸ:', result);
                document.getElementById('result').innerHTML = 
                    '<h3>getImageListæµ‹è¯•ç»“æœ:</h3><pre>' + JSON.stringify(result, null, 2) + '</pre>';
            } catch (error) {
                console.error('âŒ getImageListè°ƒç”¨å¤±è´¥:', error);
                document.getElementById('result').innerHTML = 
                    '<h3>getImageListæµ‹è¯•å¤±è´¥:</h3><pre>' + error.message + '</pre>';
            }
        }

        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æµ‹è¯•
        window.onload = function() {
            console.log('ğŸš€ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹æµ‹è¯•äº‘å‡½æ•°...');
            testImageManager();
        };
    </script>
</body>
</html>
