# 地址选择器组件使用说明

## 概述

基于 `element-china-area-data` 和 `antd` 的省市区三级联动地址选择器组件，支持搜索、验证和完整的工具函数。

## 组件特性

- ✅ 基于 element-china-area-data 数据源
- ✅ 支持三级联动选择（省-市-区）
- ✅ 支持搜索功能
- ✅ 支持清空选择
- ✅ 提供完整的工具函数
- ✅ 支持表单集成
- ✅ 支持自定义样式
- ✅ 开发环境显示调试信息
- ✅ 地址代码验证功能
- ✅ 地址层级检测
- ✅ 地址搜索功能
- ✅ 省份、城市、区县数据查询

## 安装依赖

```bash
npm install antd element-china-area-data
```

## 基础用法

```jsx
import ElementAddressSelector from './components/ElementAddressSelector';

function MyComponent() {
  const [address, setAddress] = useState([]);

  const handleAddressChange = (value) => {
    setAddress(value);
    console.log('选中的地址代码:', value);
  };

  return (
    <ElementAddressSelector
      value={address}
      onChange={handleAddressChange}
      placeholder="请选择省市区"
    />
  );
}
```

## 表单集成

```jsx
import { Form } from 'antd';
import ElementAddressSelector from './components/ElementAddressSelector';

function AddressForm() {
  const [form] = Form.useForm();

  return (
    <Form form={form} layout="vertical">
      <Form.Item
        name="address"
        label="省市区"
        rules={[
          { required: true, message: '请选择省市区' },
          { 
            validator: (_, value) => {
              if (!value || value.length < 3) {
                return Promise.reject(new Error('请选择完整的省市区'));
              }
              return Promise.resolve();
            }
          }
        ]}
      >
        <ElementAddressSelector
          placeholder="请选择省市区"
          style={{ width: '100%' }}
        />
      </Form.Item>
    </Form>
  );
}
```

## 组件属性

| 属性 | 类型 | 默认值 | 说明 |
|------|------|--------|------|
| value | Array | [] | 选中的地址代码数组 |
| onChange | Function | - | 选择变化时的回调函数 |
| placeholder | String | "请选择省市区" | 占位符文本 |
| allowClear | Boolean | true | 是否允许清空 |
| size | String | "large" | 组件尺寸 |
| style | Object | {} | 自定义样式 |
| className | String | "" | 自定义类名 |

## 工具函数

### AddressUtils.getAddressText(codes)
根据地址代码数组获取完整的地址文本。

```jsx
import { AddressUtils } from './components/ElementAddressSelector';

const addressText = AddressUtils.getAddressText(['440000', '440600', '440604']);
console.log(addressText); // "广东省佛山市禅城区"
```

### AddressUtils.validateAddressCode(codes)
验证地址代码是否有效。

```jsx
const isValid = AddressUtils.validateAddressCode(['440000', '440600', '440604']);
console.log(isValid); // true
```

### AddressUtils.getAddressLevel(codes)
获取地址的层级信息。

```jsx
const level = AddressUtils.getAddressLevel(['440000', '440600', '440604']);
console.log(level); // "district"
```

### AddressUtils.searchAddress(keyword)
搜索地址。

```jsx
const results = AddressUtils.searchAddress('佛山');
console.log(results); // 返回包含"佛山"的所有地址结果
```

### AddressUtils.getProvinces()
获取所有省份。

```jsx
const provinces = AddressUtils.getProvinces();
console.log(provinces); // 返回所有省份的数组
```

### AddressUtils.getCitiesByProvince(provinceCode)
根据省份代码获取城市。

```jsx
const cities = AddressUtils.getCitiesByProvince('440000');
console.log(cities); // 返回广东省的所有城市
```

### AddressUtils.getDistrictsByCity(cityCode)
根据城市代码获取区县。

```jsx
const districts = AddressUtils.getDistrictsByCity('440600');
console.log(districts); // 返回佛山市的所有区县
```

## 演示页面

访问 `/address-demo` 路径可以查看完整的演示页面，包括：

1. 基础用法演示
2. 表单集成示例
3. 工具函数测试
4. 组件特性展示

## 注意事项

1. 确保已安装 `antd` 和 `element-china-area-data` 依赖
2. 地址代码格式为字符串数组，如 `['440000', '440600', '440604']`
3. 组件支持搜索功能，可以输入关键词快速定位
4. 开发环境下会显示调试信息
5. 表单验证时建议检查地址代码的完整性

## 数据格式

地址数据基于 `element-china-area-data` 包，包含：

- 省份代码：6位数字，如 `440000`
- 城市代码：6位数字，如 `440600`
- 区县代码：6位数字，如 `440604`

地址代码遵循国家标准行政区划代码。
