<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ§åˆ¶å°æµ‹è¯•é¡µé¢</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .log {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        button {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .error { color: red; }
        .success { color: green; }
        .warning { color: orange; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” æ§åˆ¶å°æµ‹è¯•é¡µé¢</h1>
        <p>è¿™ä¸ªé¡µé¢ç”¨äºæµ‹è¯•JavaScriptåŠŸèƒ½å’Œè¯Šæ–­é—®é¢˜</p>
        
        <div>
            <button onclick="testBasicJS()">æµ‹è¯•åŸºç¡€JavaScript</button>
            <button onclick="testLocalStorage()">æµ‹è¯•æœ¬åœ°å­˜å‚¨</button>
            <button onclick="testRouter()">æµ‹è¯•è·¯ç”±</button>
            <button onclick="testReact()">æµ‹è¯•React</button>
            <button onclick="clearLog()">æ¸…é™¤æ—¥å¿—</button>
        </div>
        
        <div id="log" class="log">ç­‰å¾…æµ‹è¯•...</div>
    </div>

    <script>
        const log = document.getElementById('log');
        
        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'error' ? 'error' : type === 'success' ? 'success' : type === 'warning' ? 'warning' : '';
            log.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
            log.scrollTop = log.scrollHeight;
            console.log(`[${timestamp}] ${message}`);
        }
        
        function clearLog() {
            log.innerHTML = '';
        }
        
        function testBasicJS() {
            addLog('ğŸ§ª å¼€å§‹æµ‹è¯•åŸºç¡€JavaScript...');
            
            try {
                // æµ‹è¯•åŸºæœ¬åŠŸèƒ½
                addLog('âœ… å˜é‡å£°æ˜æ­£å¸¸');
                const testVar = 'test';
                addLog('âœ… å‡½æ•°è°ƒç”¨æ­£å¸¸');
                addLog('âœ… å¯¹è±¡æ“ä½œæ­£å¸¸');
                const testObj = { name: 'test', value: 123 };
                addLog('âœ… æ•°ç»„æ“ä½œæ­£å¸¸');
                const testArray = [1, 2, 3];
                addLog('âœ… åŸºç¡€JavaScriptæµ‹è¯•é€šè¿‡', 'success');
            } catch (error) {
                addLog('âŒ åŸºç¡€JavaScriptæµ‹è¯•å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        function testLocalStorage() {
            addLog('ğŸ§ª å¼€å§‹æµ‹è¯•æœ¬åœ°å­˜å‚¨...');
            
            try {
                // æµ‹è¯•localStorage
                localStorage.setItem('test_key', 'test_value');
                const retrieved = localStorage.getItem('test_key');
                if (retrieved === 'test_value') {
                    addLog('âœ… localStorageå†™å…¥å’Œè¯»å–æ­£å¸¸', 'success');
                } else {
                    addLog('âŒ localStorageè¯»å–å€¼ä¸åŒ¹é…', 'error');
                }
                
                // æµ‹è¯•JSONæ“ä½œ
                const testData = { user: 'admin', loggedIn: true };
                localStorage.setItem('test_json', JSON.stringify(testData));
                const parsedData = JSON.parse(localStorage.getItem('test_json'));
                if (parsedData.user === 'admin' && parsedData.loggedIn === true) {
                    addLog('âœ… JSONåºåˆ—åŒ–å’Œååºåˆ—åŒ–æ­£å¸¸', 'success');
                } else {
                    addLog('âŒ JSONæ“ä½œå¤±è´¥', 'error');
                }
                
                // æ¸…ç†æµ‹è¯•æ•°æ®
                localStorage.removeItem('test_key');
                localStorage.removeItem('test_json');
                addLog('âœ… æœ¬åœ°å­˜å‚¨æµ‹è¯•å®Œæˆ', 'success');
            } catch (error) {
                addLog('âŒ æœ¬åœ°å­˜å‚¨æµ‹è¯•å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        function testRouter() {
            addLog('ğŸ§ª å¼€å§‹æµ‹è¯•è·¯ç”±åŠŸèƒ½...');
            
            try {
                // æµ‹è¯•URLæ“ä½œ
                const currentUrl = window.location.href;
                addLog('âœ… å½“å‰URL: ' + currentUrl);
                
                // æµ‹è¯•hashè·¯ç”±
                if (currentUrl.includes('#')) {
                    addLog('âœ… æ£€æµ‹åˆ°hashè·¯ç”±', 'success');
                } else {
                    addLog('âš ï¸ æœªæ£€æµ‹åˆ°hashè·¯ç”±ï¼Œå¯èƒ½ä½¿ç”¨browserè·¯ç”±', 'warning');
                }
                
                // æµ‹è¯•history API
                if (typeof history !== 'undefined') {
                    addLog('âœ… History APIå¯ç”¨', 'success');
                } else {
                    addLog('âŒ History APIä¸å¯ç”¨', 'error');
                }
                
                addLog('âœ… è·¯ç”±æµ‹è¯•å®Œæˆ', 'success');
            } catch (error) {
                addLog('âŒ è·¯ç”±æµ‹è¯•å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        function testReact() {
            addLog('ğŸ§ª å¼€å§‹æµ‹è¯•Reactç›¸å…³åŠŸèƒ½...');
            
            try {
                // æ£€æŸ¥Reactæ˜¯å¦åŠ è½½
                if (typeof React !== 'undefined') {
                    addLog('âœ… Reactå·²åŠ è½½', 'success');
                } else {
                    addLog('âŒ ReactæœªåŠ è½½', 'error');
                }
                
                // æ£€æŸ¥React Router
                if (typeof ReactRouter !== 'undefined') {
                    addLog('âœ… React Routerå·²åŠ è½½', 'success');
                } else {
                    addLog('âŒ React RouteræœªåŠ è½½', 'error');
                }
                
                // æ£€æŸ¥æ˜¯å¦æœ‰Reactåº”ç”¨æŒ‚è½½ç‚¹
                const appElement = document.getElementById('root');
                if (appElement) {
                    addLog('âœ… æ‰¾åˆ°Reactåº”ç”¨æŒ‚è½½ç‚¹', 'success');
                } else {
                    addLog('âŒ æœªæ‰¾åˆ°Reactåº”ç”¨æŒ‚è½½ç‚¹', 'error');
                }
                
                addLog('âœ… Reactæµ‹è¯•å®Œæˆ', 'success');
            } catch (error) {
                addLog('âŒ Reactæµ‹è¯•å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨è¿è¡ŒåŸºç¡€æµ‹è¯•
        window.addEventListener('load', function() {
            addLog('ğŸ“„ é¡µé¢åŠ è½½å®Œæˆï¼Œå¼€å§‹è‡ªåŠ¨æµ‹è¯•...');
            testBasicJS();
            testLocalStorage();
        });
        
        // æ•è·å…¨å±€é”™è¯¯
        window.addEventListener('error', function(e) {
            addLog('âŒ å…¨å±€é”™è¯¯: ' + e.message + ' at ' + e.filename + ':' + e.lineno, 'error');
        });
        
        // æ•è·æœªå¤„ç†çš„Promiseæ‹’ç»
        window.addEventListener('unhandledrejection', function(e) {
            addLog('âŒ æœªå¤„ç†çš„Promiseæ‹’ç»: ' + e.reason, 'error');
        });
    </script>
</body>
</html>
